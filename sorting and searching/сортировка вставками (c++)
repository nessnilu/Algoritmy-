#include <iostream>
#include <vector>

using namespace std;

// Функция сортировки вставками
void insertionSort(vector<int>& arr) {
    int n = arr.size(); // Получаем размер массива
    
    // Начинаем со второго элемента (индекс 1), так как первый элемент считается отсортированным
    for (int i = 1; i < n; i++) {
        int key = arr[i]; // Текущий элемент, который мы вставляем в отсортированную часть
        int j = i - 1;    // Индекс последнего элемента в отсортированной части
        
        // Перемещаем элементы отсортированной части, которые больше key, на одну позицию вправо
        while (j >= 0 && arr[j] > key) {
            arr[j + 1] = arr[j]; // Сдвигаем элемент вправо
            j = j - 1;           // Переходим к следующему элементу слева
        }
        
        // Вставляем key на правильную позицию
        arr[j + 1] = key;
    }
}

// Функция для демонстрации процесса сортировки
void demonstrationInsertionSort(vector<int> arr) {
    cout << "Демонстрация работы сортировки вставками:" << endl;
    cout << "Исходный массив: ";
    for (int num : arr) cout << num << " ";
    cout << endl << endl;
    
    int n = arr.size();
    
    for (int i = 1; i < n; i++) {
        int key = arr[i];
        int j = i - 1;
        
        cout << "Шаг " << i << ": Вставляем " << key << endl;
        cout << "Состояние массива до вставки: ";
        for (int k = 0; k <= i; k++) cout << arr[k] << " ";
        cout << "| ";
        for (int k = i + 1; k < n; k++) cout << arr[k] << " ";
        cout << endl;
        
        // Процесс сдвига элементов
        while (j >= 0 && arr[j] > key) {
            arr[j + 1] = arr[j];
            j--;
        }
        arr[j + 1] = key;
        
        cout << "После вставки: ";
        for (int k = 0; k <= i; k++) cout << arr[k] << " ";
        if (i + 1 < n) cout << "| ";
        for (int k = i + 1; k < n; k++) cout << arr[k] << " ";
        cout << endl << endl;
    }
}

// Вспомогательная функция для вывода массива
void printArray(const vector<int>& arr) {
    for (int num : arr) {
        cout << num << " ";
    }
    cout << endl;
}

int main() {
    // Тестовые массивы
    vector<int> arr1 = {12, 11, 13, 5, 6};
    vector<int> arr2 = {64, 34, 25, 12, 22, 11, 90};
    vector<int> arr3 = {5, 2, 4, 6, 1, 3};
    
    // Демонстрация с подробным выводом
    cout << "=== ДЕМОНСТРАЦИЯ РАБОТЫ АЛГОРИТМА ===" << endl;
    demonstrationInsertionSort(arr1);
    
    cout << "=== ТЕСТИРОВАНИЕ НА РАЗНЫХ МАССИВАХ ===" << endl;
    
    vector<int> test1 = {12, 11, 13, 5, 6};
    cout << "Массив 1 до сортировки: ";
    printArray(test1);
    insertionSort(test1);
    cout << "Массив 1 после сортировки: ";
    printArray(test1);
    cout << endl;
    
    vector<int> test2 = {1, 2, 3, 4, 5}; // Уже отсортированный
    cout << "Массив 2 до сортировки: ";
    printArray(test2);
    insertionSort(test2);
    cout << "Массив 2 после сортировки: ";
    printArray(test2);
    cout << endl;
    
    vector<int> test3 = {5, 4, 3, 2, 1}; // Обратный порядок
    cout << "Массив 3 до сортировки: ";
    printArray(test3);
    insertionSort(test3);
    cout << "Массив 3 после сортировки: ";
    printArray(test3);
    
    return 0;
}
